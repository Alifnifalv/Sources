@model Eduegate.Web.Library.ViewModels.AddProductViewModel
@{
    Layout = null;
    var createOrEdit = Model.QuickCreate.ProductIID == 0 ? "Create" : "Edit";
}

<div id="@(createOrEdit)Product" class="windowcontainer">
    <div id="Product@(createOrEdit)" ng-controller="CreateProductController" ng-init="Init(@Newtonsoft.Json.JsonConvert.SerializeObject(Model),'Product@(createOrEdit)')" ng-model="ProductModel">
        @Html.Partial("~/Views/Shared/_InfoMessage.cshtml")

        @*<div class="pagenav"><a class="pagenav-leftmargin" href="#">Dashboard </a><a href="#" class="pagenav-leftmargin"> Product Catalog </a> /<span> List</span>  /<span> @(createOrEdit)</span></div>*@
        <div class="pageheader stickdiv">
            <span>@(createOrEdit) Product</span>
            <div class="alignright menugroup">
                <button class="button-orange alignright" type="button" ng-click="SaveProduct();" form="nameform" value="Submit">Save</button>
                <button class="button-orange alignright" type="submit" ng-click="LoadProductView();" form="nameform" value="Submit">Cancel</button>
                <div class="button-orange alignright" ng-click="LoadProductView()"><a href="" title="@(createOrEdit) Product"><i class="fa fa-eye"></i><span>Product List</span></a></div>
            </div>
        </div>
        <center> <span id="Load" class="fa fa-circle-o-notch fa-pulse waypoint" style="font-size:20px; display:none"><div class="preloader"><img src="~/Images/preloader.gif" width="32" height="32" alt="Loading" /></span></center>

        <div class="panel-body">
            <form class="form-horizontal" action="#" name="QuickCreateForm" novalidate="novalidate">
                <div class="container-left options alignleft">

                    <div class="form-group">
                        <label class="addprodleft control-label">Product Name<span class="redcolor">*</span></label>
                        <div class="controls productname fieldpopup">
                            <input name="ProductName" id="prodnameid" class="" style="display:inline !important;" type="text" placeholder="Product Name" data-rel="tooltip-right" data-original-title="Insert your input tips here" ng-model="ProductModel.QuickCreate.ProductName" ng-change="UpdateDefaultLangValueInPopup();" ng-focus="MultilanguagePopup($event, 'show');" required>
                            <span class="cufon" style="color:red" ng-show="submitted && QuickCreateForm.ProductName.$error.required">Product Name is required</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="addprodleft control-label">Product Type<span class="redcolor">*</span></label>
                        <div class="controls brand">
                            <select name="ProductTypeID" ng-model="ProductModel.QuickCreate.ProductTypeID" required>
                                <i class="fa fa-caret-down"></i>
                                <option ng-repeat="pt in productTypes track by $index" ng-selected="ProductModel.QuickCreate.ProductTypeID == pt.ProductTypeID" value="{{pt.ProductTypeID}}">{{pt.ProductTypeName}}</option>
                            </select>
                            <i class="dropdownarrow fa fa-caret-down"></i>
                            <span class="cufon" style="color:red" ng-show="submitted && QuickCreateForm.ProductTypeID.$error.required">Product Type is required</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="addprodleft control-label">Part No<span class="redcolor">*</span></label>
                        <div class="controls productname fieldpopup">
                            <input name="PartNumber" id="prodnameid" class="" style="display:inline !important;" type="text" placeholder="Part Number" data-rel="tooltip-right" data-original-title="Insert your input tips here"
                                   ng-model="ProductModel.SKUMappings[0].PartNumber" required>
                            <span class="cufon" style="color:red" ng-show="submitted && ProductModel.SKUMappings[0].PartNumber.$error.required">Part Number is required</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="addprodleft control-label">Bar Code<span class="redcolor">*</span></label>
                        <div class="controls productname fieldpopup">
                            <input name="PartNumber" id="prodnameid" class="" style="display:inline !important;" type="text" placeholder="Bar Code" data-rel="tooltip-right" data-original-title="Insert your input tips here"
                                   ng-model="ProductModel.SKUMappings[0].BarCode" required>
                            <span class="cufon" style="color:red" ng-show="submitted && ProductModel.SKUMappings[0].BarCode.$error.required">Bar code is required</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="addprodleft control-label">Tax</label>
                        <div class="controls brand">
                            <select name="TaxTemplateID" ng-model="ProductModel.QuickCreate.TaxTemplate" required>
                                <i class="fa fa-caret-down"></i>
                                <option ng-repeat="tmpl in TaxTemplates track by $index" ng-selected="ProductModel.QuickCreate.TaxTemplate == tmpl.Key" value="{{tmpl.Key}}">{{tmpl.Value}}</option>
                            </select>
                            <i class="dropdownarrow fa fa-caret-down"></i>
                            @*<span class="cufon" style="color:red" ng-show="submitted && QuickCreateForm.TaxTemplateID.$error.required">Tax is required</span>*@
                        </div>

                    </div>
                </div>
                <div class="container-right options alignleft">
                    <div id="PropertyType"></div>
                </div>

                <table class="data-grid" cellpadding="0" cellspacing="0">
                    <thead>
                        <tr>
                            <th class="small-col-width">PriceList Name</th>
                            <th class="small-col-width">Cost Price</th>
                            <th class="small-col-width">Selling Price</th>
                            <th class="small-col-width">Discount</th>
                            <th class="small-col-width">Discount %</th>
                            <th class="small-col-width">Status</th>
                            <th class="small-col-width"></th>
                            <th class="small-col-width last"></th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="productSKUPriceSetting in ProductPrice">
                        <tr>
                            <td class="small-col-width">
                                <span ng-bind="productSKUPriceSetting.PriceDescription"></span>
                            </td>
                            <td class="small-col-width">
                                <span class="codewrap fieldwithicon">
                                    <input type="text" class="ng-pristine" ng-model="productSKUPriceSetting.Cost">
                                    <span class="gridicon" ng-click="priceSetting.GetDataHistory(1, productSKUPriceSetting.ProductPriceListItemMapIID, 'Cost', $event);" title="view log"><i class="fa fa-outdent" aria-hidden="true"></i></span>
                                </span>
                            </td>
                            <td class="small-col-width">
                                <span class="codewrap fieldwithicon">
                                    <input type="text" class="ng-pristine" ng-model="productSKUPriceSetting.Price">
                                    <span class="gridicon" ng-click="priceSetting.GetDataHistory(1, productSKUPriceSetting.ProductPriceListItemMapIID, 'Price',$event);" title="view log"><i class="fa fa-outdent" aria-hidden="true"></i></span>
                                </span>
                            </td>
                            <td class="small-col-width">
                                <input type="text" class="ng-pristine" ng-model="productSKUPriceSetting.Discount">
                            </td>

                            <td class="small-col-width">
                                <input type="text" class="ng-pristine" ng-model="productSKUPriceSetting.DiscountPercentage">
                            </td>

                            <td class="small-col-width">
                                <span class="link-content">
                                    <select ng-model="productSKUPriceSetting.PriceListStatus.Key">
                                        <i class="fa fa-caret-down"></i>
                                        <option ng-repeat="status in priceSetting.PriceListStatuses" ng-selected="productSKUPriceSetting.PriceListStatus.Key == status.Key" value="{{status.Key}}">{{status.Value}}</option>
                                    </select>
                                </span>
                            </td>
                            <td class="small-col-width textcenter">
                                <span class="button-orange" ng-click="priceSetting.ToggleQuantity($event, $index, ModelQuantityStructure, productSKUPriceSetting.QuantityPrice)" title="Quantity Price"><i class="fa qtyprice" aria-hidden="true"></i></span>
                            </td>
                            <td class="small-col-width last textcenter">
                                <span class="button-orange qtybtn" ng-click="priceSetting.RemoveGridRow($event, $index, @Newtonsoft.Json.JsonConvert.SerializeObject(new Eduegate.Web.Library.ViewModels.ProductPriceSKUViewModel()), ViewModels.@(DynamicViews.ProductSKUPriceSetting))">
                                    <i class="fa fa-minus"></i>
                                </span>
                            </td>
                        </tr>
                        <tr class="quantity-toggle">
                            <td colspan="7" class="nopadding">
                                <div class="quantity-fieldswrap fullwidth alignleft">
                                    <table class="quantityfields fullwidth">
                                        <thead>
                                            <tr>
                                                <th class="medium-col-width">Quantity</th>
                                                <th class="medium-col-width">Discount</th>
                                                <th class="medium-col-width">Discount percentage</th>
                                                <th class="small-col-width"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="ng-scope" ng-repeat="quantityPrice in productSKUPriceSetting.QuantityPrice">
                                                <td class="medium-col-width"><input type="text" ng-model="quantityPrice.Quantity"></td>
                                                <td class="medium-col-width"><input type="text" ng-model="quantityPrice.Discount"></td>
                                                <td class="medium-col-width"><input type="text" ng-model="quantityPrice.DiscountPercentage"></td>
                                                <td class="small-col-width textcenter">
                                                    <span class="button-orange qtybtn" ng-click="priceSetting.InsertGridRow($event, $index, ModelQuantityStructure, productSKUPriceSetting.QuantityPrice)">
                                                        <i class="fa fa-plus"></i>
                                                    </span>
                                                    <span class="button-orange qtybtn" ng-click="priceSetting.RemoveGridRow($event, $index, ModelQuantityStructure, productSKUPriceSetting.QuantityPrice)">
                                                        <i class="fa fa-minus"></i>
                                                    </span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>
</div>