@model Eduegate.ERP.Admin.Models.LoginViewModel

@{
    Layout = null;
    ViewBag.Title = "Log in";
    var settings = new Eduegate.Service.Client.SettingServiceClient(null);
    var isMultiCompany = Eduegate.Framework.Extensions.ConfigurationExtensions.GetAppConfigValueWithDefault<bool>("IsMultiCompany", false);
   
}

<!DOCTYPE html>
<html lang="en" ng-app="Eduegate.ERP.Admin">
<head>
    @{
        var clientName = new Eduegate.Domain.FrameworkSettingBL(null).GetSettingValue<string>("CLIENTINSTANCE");
    }
    <title>@Eduegate.Framework.Extensions.ConfigurationExtensions.GetAppConfigValue("PortalTitle")</title>
    <link rel="apple-touch-icon" sizes="180x180" href="@Url.Content("~/Images/favicon.ico")" />
    <link rel="icon" type="image/png" sizes="192x192" href="@Url.Content("~/Images/favicon.ico")" />
    <link rel="shortcut icon" href="@Url.Content("~/Images/favicon.ico")" type="image/x-icon" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" name="viewport">
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/angular")

    <!-- The library to replace with your local copy of ng-weekly-scheduler -->
    <script src="@Url.Content("~/Scripts/ng-weekly-scheduler.js")"></script>
    <script src="@Url.Content("~/Scripts/daypilot-all.min.js")"></script>


    @Scripts.Render("~/bundles/appmodels")
    @Scripts.Render("~/bundles/plugins")
    @Scripts.Render("~/bundles/others")
    @Scripts.Render("~/bundles/jslinq")
    @Scripts.Render("~/bundles/highchart")
    <link href="~/Content/login-style-grey.css" type="text/css" rel="stylesheet" />
    <link href="~/clients/@clientName/css/clientstyle.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">


    <script src="~/Scripts/ng-map.min.js" type="text/javascript"></script>
</head>

<body ng-controller="LoginController" ng-init="Init(@Newtonsoft.Json.JsonConvert.SerializeObject(Model))">
    <div id="LoginOverlay" class="preload-overlay">
		<span id="LoginButtonLoader" class="preloadImg"><img src="~/Images/preloader.gif" alt="loader" /></span>
	</div>
    <div class="loginpage flex-center" align="center">
        <div class="columns h-100  d-none d-lg-block">
            <div class="d-flex flex-center w-lg-50 pt-15 pt-lg-0 px-10 h-100">
                <!--begin::Aside-->
                <div class="d-flex flex-center flex-lg-start flex-column">
                    <!--begin::Logo-->
                    <a  class="mb-7">
                        <img class="h-50px" alt="Logo" src="~/Clients/@clientName/Images/logo/LoginPageLogo.svg" >
                    </a>
                    <!--end::Logo-->
                    <!--begin::Title-->
                    <h2 class="text-white fw-normal m-0">
                        an education OS
                    </h2>
                    <!--end::Title-->
                </div>
                <!--begin::Aside-->
            </div>
        </div>
        <div class="bg-body d-flex flex-column align-items-stretch flex-center rounded-4 w-md-600px p-20" ng-model="LoginModel">
            <!--begin::Wrapper-->
            <div class="d-flex flex-center flex-column flex-column-fluid px-lg-10 pb-15 pb-lg-20">

                <!--begin::Form-->
                @using (Html.BeginForm(null, null, FormMethod.Post, new { @class = "form  fv-plugins-bootstrap5 fv-plugins-framework min-w-300px", id = "frmLogin", @ng_submit = "Signin($event);" }))
                {
                    <form class="" novalidate="novalidate">
                        <!--begin::Heading-->
                        <div class="text-center mb-11">
                            <!--begin::Title-->
                            <h1 class="text-dark fw-bolder mb-3">
                                Sign In
                            </h1>
                            <!--end::Title-->
                            <!--begin::Subtitle-->
                            <div class="text-gray-500 fw-semibold fs-6">
                                Your Login Options
                            </div>
                            <!--end::Subtitle--->
                        </div>
                        <!--begin::Heading-->
                        <!--begin::Login options-->
                        <div class="row g-3 mb-9 form-check form-check-custom form-check-success form-check-solid form-check-sm">
                            <!--begin::Col-->
                            <div class="col-md-6">
                                <!--begin::Google link--->

                                <p for="LoginType">
                                    <label class="btn btn-flex btn-outline btn-text-gray-700 btn-active-color-primary bg-state-light flex-center text-nowrap w-100">
                                        @Html.RadioButtonFor(x => x.LoginType, "UserID", new { @class = "required form-check-input me-2", @ng_model = "LoginModel.LoginType" })
                                        <span>User ID </span>
                                    </label>
                                </p>
                                <!--end::Google link--->
                            </div>
                            <!--end::Col-->
                            <!--begin::Col-->
                            <div class="col-md-6">
                                <p>
                                    <label class="btn btn-flex btn-outline btn-text-gray-700 btn-active-color-primary bg-state-light flex-center text-nowrap w-100">
                                        @Html.RadioButtonFor(x => x.LoginType, "Email", new { @class = "required form-check-input me-2", @ng_model = "LoginModel.LoginType" })
                                        <span>Email </span>
                                    </label>
                                </p>
                                <!--end::Google link--->
                            </div>
                            <!--end::Col-->
                        </div>
                        <!--end::Login options-->
                        <!--begin::Separator-->
                        <div class="separator separator-content my-14">
                            <span ng-if="LoginModel.LoginType !== 'Email'" class="w-200px text-gray-500 fw-semibold fs-7">Login with user id</span>
                            <span ng-if="LoginModel.LoginType === 'Email'" class="w-200px text-gray-500 fw-semibold fs-7">Login with email</span>
                        </div>
                        <!--end::Separator-->
                        <!--begin::Input group--->
                        <div class="fv-row mb-8 fv-plugins-icon-container" ng-if="LoginModel.LoginType !== 'Email'">


                            <!--begin::Email-->
                            @Html.TextBoxFor(model => model.LoginUserID, new { @class = "required form-control bg-transparent", @ng_model = "LoginModel.LoginUserID", @ng_keyup = "UserIDKeyup();", @placeholder = "User ID" })


                            @*<input type="text" placeholder="Email" name="email" autocomplete="off" class="form-control bg-transparent">*@
                            <!--end::Email-->
                            @Html.ValidationMessageFor(m => m.LoginUserID, null, new { @class = "fv-plugins-message-container invalid-feedback" })
                            <span class="fv-plugins-message-container invalid-feedback" ng-show="IsEmailPasswordIncorrect">User ID/Password is incorrect or else no access to this user!</span>

                        </div>

                        <!--end::Input group--->
                        <!--begin::Input group--->
                        <div class="fv-row mb-8 fv-plugins-icon-container" ng-if="LoginModel.LoginType === 'Email'">


                            <!--begin::Email-->
                            @Html.TextBoxFor(model => model.Email, new { @type = "email", @class = "required  form-control bg-transparent", @ng_model = "LoginModel.Email", @ng_keyup = "EmailKeyup();", @placeholder = "Email" })


                            @*<input type="text" placeholder="Email" name="email" autocomplete="off" class="form-control bg-transparent">*@
                            <!--end::Email-->
                            @Html.ValidationMessageFor(m => m.Email, null, new { @class = "fv-plugins-message-container invalid-feedback" })
                            <span class="fv-plugins-message-container invalid-feedback" ng-show="IsEmailPasswordIncorrect">Email ID/Password is incorrect or else no access to this user!</span>

                        </div>

                        <!--end::Input group--->
                        <div class="fv-row mb-3 fv-plugins-icon-container">
                            <!--begin::Password-->
                            @Html.PasswordFor(m => m.Password, new { @class = "required  form-control bg-transparent", @ng_model = "LoginModel.Password", @ng_keyup = "PasswordKeyup();", @placeholder = "Password" })
                            @Html.ValidationMessageFor(m => m.Password, null, new { @class = "fv-plugins-message-container invalid-feedback" })
                            <!--end::Password-->
                        </div>
                        <!--end::Input group--->
                        <!--begin::Wrapper-->
                        <div class="d-flex flex-stack flex-wrap gap-3 fs-base fw-semibold mb-8">
                            <div>
                                <input type="checkbox" class="custom-checkbox" id="checkbox-1" value="1" ng-model="LoginModel.RememberMe">
                            </div>

                            <!--begin::Link-->
                            <a class="link-primary">
                                Remember me!
                            </a>
                            <!--end::Link-->
                        </div>
                        <!--end::Wrapper-->
                        <!--begin::Submit button-->

                        <div class="d-grid mb-10">
                            <button type="submit" id="kt_sign_in_submit" class="btn btn-primary">

                                <!--begin::Indicator label-->
                                <span class="indicator-label">
                                    Log In
                                </span>
                                <!--end::Indicator label-->
                                <!--begin::Indicator progress-->
                                <span class="indicator-progress" id="indicator-progress" >
                                    Please wait...    <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                                </span>
                                <!--end::Indicator progress-->
                            </button>
                        </div>
                        <!--end::Submit button-->
                        <!--begin::Sign up-->
                        <div class="text-gray-500 text-center fw-semibold fs-6">
                            Not a Member yet?

                            <a class="link-primary" type="submit">
                                Contact admin
                            </a>
                        </div>
                        <!--end::Sign up-->
                    </form>
                    <!--end::Form-->
                }
            </div>
         
            <div class="d-flex justify-content-center align-items-center position-absolute top-0 bottom-0 end-0 start-0  opacity-30" ng-show="$scope.ShowButtonLoader == true" style=" background: rgba(0, 0, 0, 0.4);" >
                <div class="spinner-border text-primary " role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <!--end::Wrapper-->
            <!--begin::Footer-->
            <!--end::Footer-->
        </div>
    </div>


    <script type="text/javascript">
       utility.myHost = "@Eduegate.Framework.Extensions.ConfigurationExtensions.GetAppConfigValue("RootUrl")";
       $.validator.unobtrusive.parse($('#frmLogin'));
    </script>
</body>
</html>
