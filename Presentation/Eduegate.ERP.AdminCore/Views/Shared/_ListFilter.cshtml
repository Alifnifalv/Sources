@model Eduegate.Web.Library.ViewModels.SearchListViewModel
<div class="productGrid_massaction">
    <div class="tabletop">
        <div class="massaction">
            <div class="table-topright textright">
                <ul>
                    <li>
                        <div class="button-orange" ng-click="">
                            <a href="" title="@Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Refresh")">
                                <span id="ReLoadBtn" ng-click="RowModel.ReLoad($event)" class="reload-the-grid-data"><i class="fa fa-refresh"></i> @Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Refresh")</span>
                                </a>
                        </div>
                        <div ng-click="RowModel.LoadFilterView();" class="button-orange" id="filterbuttonoption">
                            <a href="" title="@Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Filter")">
                                <span ng-class=" {filter: !RowModel.HasFilters, activefilter: RowModel.HasFilters}">
                                    <i class=" filtericon fa fa-filter"></i>@Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Filter")
                                    @*<span class="filter-tabletview"></span>*@
                                </span>
                                </a>
                        </div>

                        @if (ViewBag.HasExportAccess == null || ViewBag.HasExportAccess)
                        {
                    <div class="button-dropdown export button-orange" ng-click="RowModel.ExportData($event)">
                        <a href="" title="@Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Export")">
                            <span>
                                <i class="fa fa-spinner fa-pulse alignleft"></i>
                                <i class="fa fa-external-link alignleft"></i> @Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Export")
                                <i class="fa fa-angle-down icon"></i>
                            </span>
                            </a>
                    </div>
                        }

                    <div class="button-orange">
                        <a href="" title="@Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Close")">
                            <span ng-click="CloseWindow($event)"><i class="fa fa-close"></i> @Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Close")</span>
                            </a>
                    </div>

                        @*@if (ViewBag.HasExportAccess == null || ViewBag.HasExportAccess)
                            {*@

                        @if (Model.HasSortable)
                        {
                            <div class="alignright grid-refresh button-orange" ng-click="RowModel.SwitchView($event);">
                                <span><i ng-class="{'fa fa-list' : RowModel.IsSortableListViewToggle, 'fa fa-navicon' : !RowModel.IsSortableListViewToggle}"></i></span>
                            </div>
                        }

                        @*}*@

                        @Html.Raw(Model.InfoBar)

                    </li>
                </ul>
            </div>
            <div class="table-topleft">
                <div class="tabletop-left">
                    @*<form action="" id="productGrid_massaction-form" method="post">*@
                    <input name="form_key" type="hidden" value="WkObrUTAoAFBBWaf">

                    @if (Model.FilterColumns != null)
                    {
                        int index = 0;
                        foreach (var filterColumn in Model.FilterColumns)
                        {
                            switch (filterColumn.ColumnType)
                            {
                                case Eduegate.Services.Contracts.Enums.DataTypes.Date:
                                    <span @Html.Raw(string.IsNullOrEmpty(filterColumn.Attribute1) ? "class='field-row'" : filterColumn.Attribute1)>
                                        <label>@filterColumn.ColumnCaption</label>
                                        <span class="datetime_picker">
                                            <input autocomplete="off" type="text" id="@(ViewBag.WindowName)_QuickFilter[@index].FilterValue" name="@(ViewBag.WindowName)_QuickFilter[@index].FilterValue" ng-model="RowModel.QuickFilter[@index].FilterValue"
                                                   ng-change="RowModel.QuickFilter[@index].IsDirty= RowModel.QuickFilter[@index].FilterValue.length!=0;"
                                                   ng-keyup="$event.keyCode == 13 && RowModel.QuickSearch($event)"
                                                   wb-datepicker>
                                            <span data-datepicker="#datepicker-icon" id="datepicker-icon-trigger" class="input-group-addon1"></span>
                                        </span>
                                    </span>
                                    break;
                                case Eduegate.Services.Contracts.Enums.DataTypes.DateTime:
                                    <span @Html.Raw(string.IsNullOrEmpty(filterColumn.Attribute1) ? "class='field-row'" : filterColumn.Attribute1)>
                                        <label>@filterColumn.ColumnCaption</label>
                                        <span class="datetime_picker">
                                            <input autocomplete="off" type="text" id="@(ViewBag.WindowName)_QuickFilter[@index].FilterValue" name="@(ViewBag.WindowName)_QuickFilter[@index].FilterValue" ng-model="RowModel.QuickFilter[@index].FilterValue"
                                                   ng-change="RowModel.DropDownOnChange(@(index), 1);"
                                                   ng-keyup="$event.keyCode == 13 && RowModel.QuickSearch($event)"
                                                   datetimepicker>
                                            <span data-datepicker="#datepicker-icon" id="datepicker-icon-trigger" class="input-group-addon1"></span>
                                        </span>
                                    </span>
                                    break;
                                case Eduegate.Services.Contracts.Enums.DataTypes.String:
                                case Eduegate.Services.Contracts.Enums.DataTypes.Number:
                                default:
                                    switch (filterColumn.FilterControlType)
                                    {
                                        case Eduegate.Services.Contracts.Enums.UIControlTypes.TextBox:
                                            <span @Html.Raw(string.IsNullOrEmpty(filterColumn.Attribute1) ? "class='field-row'" : filterColumn.Attribute1) ng-class="{filtermodified:RowModel.QuickFilter[@index].IsDirty}">
                                                <label>@filterColumn.ColumnCaption</label>
                                                <input type="text" autocomplete="off" ng-model="RowModel.QuickFilter[@index].FilterValue"
                                                       ng-keyup="$event.keyCode == 13 && RowModel.QuickSearch($event)"
                                                       ng-change="RowModel.QuickFilter[@index].IsDirty= RowModel.QuickFilter[@index].FilterValue.length!=0;">
                                            </span>
                                            break;
                                        case Eduegate.Services.Contracts.Enums.UIControlTypes.DropDown:
                                            if (filterColumn.LookUpID.HasValue)
                                            {
                                                <span @Html.Raw(string.IsNullOrEmpty(filterColumn.Attribute1) ? "class='field-row'" : filterColumn.Attribute1) ng-class="{filtermodified:RowModel.QuickFilter[@index].IsDirty}">
                                                    <label>@filterColumn.ColumnCaption</label>

                                                    @if (filterColumn.IsLookupLazyLoad)
                                                    {
                                                        <ui-select style="width: 100%;"
                                                                   ng-model="RowModel.QuickFilter[@index].FilterValue3"
                                                                   theme="select2" class="pos-txt"
                                                                   ng-change="RowModel.DropDownOnChange(@(index), 2);">
                                                            <ui-select-match>{{$select.selected.Value}}</ui-select-match>
                                                            <ui-select-choices repeat="data in RowModel.LookUps.@(((Eduegate.Services.Contracts.Enums.LookUpTypes)filterColumn.LookUpID).ToString()) | filter:$select.search"
                                                                               refresh="RowModel.LoadLookups('@(((Eduegate.Services.Contracts.Enums.LookUpTypes)filterColumn.LookUpID).ToString())', @filterColumn.IsLookupLazyLoad.ToString().ToLower(), $select)"
                                                                               refresh-delay="50">{{data.Value}}</ui-select-choices>
                                                        </ui-select>
                                                    }
                                                    else
                                                    {
                                                        <ui-select style="width: 100%;"
                                                                   ng-model="RowModel.QuickFilter[@index].FilterValue3"
                                                                   theme="select2" class="pos-txt"
                                                                   ng-change="RowModel.DropDownOnChange(@(index), 2);"
                                                                   ng-click="RowModel.LoadLookups('@(((Eduegate.Services.Contracts.Enums.LookUpTypes)filterColumn.LookUpID).ToString())', @filterColumn.IsLookupLazyLoad.ToString().ToLower(), $select)">
                                                            <ui-select-match>{{$select.selected.Value}}</ui-select-match>
                                                            <ui-select-choices repeat="data in RowModel.LookUps.@(((Eduegate.Services.Contracts.Enums.LookUpTypes)filterColumn.LookUpID).ToString()) | filter:$select.search">{{data.Value}}</ui-select-choices>
                                                        </ui-select>
                                                    }
                                                </span>
                                            }
                                            break;
                                    }
                                    break;
                            }

                            index++;
                        }

                        <span class="field-row field-row-btn">
                            <label>&nbsp;</label>
                            <input type="reset" class="button-green reset" value="@Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Reset")" ng-click="RowModel.ResetQuickSearch($event)" />
                            <input type="button" class="button-orange filter-search" value="@Eduegate.ERP.Admin.Globalization.ResourceHelper.GetValue("Search")" ng-click="RowModel.QuickSearch($event)" />
                            @*<span class="fa fa-search fa-2x"></span>*@
                        </span>

                    }

                    @*</form>*@
                </div>
            </div>

        </div>
    </div>
</div>