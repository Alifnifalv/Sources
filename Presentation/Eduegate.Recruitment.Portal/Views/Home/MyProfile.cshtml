@using Eduegate.Services.Contracts.Enums;
@model Eduegate.Framework.PageRendererEngine.ViewModels.BoilerPlateInfoViewModel
@{
    ViewData["Title"] = "My Profile";
    var windowName = "myProfile";
    var settingBL = new Eduegate.Domain.Setting.SettingBL(null);
    var clientName = settingBL.GetSettingValue<string>("CLIENTINSTANCE");
}

@await Html.PartialAsync("_ToastMessage")

<div id="myProfile" ng-controller="RecruitmentController" ng-init="Init(@Newtonsoft.Json.JsonConvert.SerializeObject(Model),'@windowName')">
    <!-- Font Awesome and Bootstrap Select CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css" integrity="sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />

    <div class="kt-container-fluid p-5 lg:p-10">
        <!--begin::Main Card-->
        <div class="kt-card">
            <!--begin::Card Body-->
            <div class="kt-card-content">
                <!--begin::Profile Header-->
                <div class="flex flex-col md:flex-row items-center gap-5 border-b border-border pb-5 mb-5">
                    <!--begin::Avatar-->
                    <div class="relative shrink-0">
                        <img class="size-[140px] rounded-full" ng-src="/Content/ReadContentsByID?contentID={{ProfileDetails.ProfileContentID}}" />
                    </div>
                    <!--end::Avatar-->
                    <!--begin::Info-->
                    <div class="flex-grow text-center md:text-start">
                        <h1 class="text-2xl font-bold text-foreground">{{ProfileDetails.FirstName}} {{ProfileDetails.MiddleName}} {{ProfileDetails.LastName}}</h1>
                        <p class="text-muted-foreground">{{ProfileDetails.EmailID}}</p>
                        <div class="mt-4">
                            <input type="file" id="customFile" name="file" class="hidden" accept="image/*" ng-model="ProfileDetails.ProfileContentID" onchange="angular.element(this).scope().UploadFile(this.files[0],'ProfileDetails','ProfileContentID')">
                            <label for="customFile" class="kt-btn kt-btn-sm kt-btn-outline">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5" />
                                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z" />
                                </svg>
                                <span ng-if="!ProfileDetails.ProfileContentID">Upload profile pic</span>
                                <span ng-if="ProfileDetails.ProfileContentID">Update profile pic</span>
                            </label>
                        </div>
                    </div>
                    <!--end::Info-->
                </div>
                <!--end::Profile Header-->
                <!--begin::Form-->
                <form class="kt-form" ng-submit="updateProfile(ProfileDetails)">
                    <input type="hidden" ng-model="ProfileDetails.SeekerID" />

                    <!-- Personal details Card -->
                    <div class="kt-card kt-card-border mb-9">
                        <div class="kt-card-header">
                            <h3 class="kt-card-title">Personal details</h3>
                        </div>
                        <div class="kt-card-content">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                                <div class="kt-form-item">
                                    <label class="kt-form-label">First Name *</label>
                                    <input type="text" class="kt-input" placeholder="First name" ng-model="ProfileDetails.FirstName" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Middle Name</label>
                                    <input type="text" class="kt-input" placeholder="Middle name" ng-model="ProfileDetails.MiddleName" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Last Name *</label>
                                    <input type="text" class="kt-input" placeholder="Last name" ng-model="ProfileDetails.LastName" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label" for="Gender">Gender *</label>
                                    <select id="Gender" name="Gender" class="kt-select" required ng-options="item as item.Value for item in Gender track by item.Key" ng-model="ProfileDetails.Gender">
                                        <option value=""></option>
                                    </select>
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Date of birth *</label>
                                    <input type="text" class="kt-input" autocomplete="off" required ng-model="ProfileDetails.DateOfBirthString" datetime-picker ng-change="calculateAge()">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Age</label>
                                    <input type="text" class="kt-input" disabled placeholder="Age" ng-model="ProfileDetails.Age">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label" for="bloodGroup">Blood Group *</label>
                                    <select id="bloodGroup" name="bloodGroup" class="kt-select" required ng-options="item as item.Value for item in BloodGroups track by item.Key" ng-model="ProfileDetails.BloodGroup">
                                        <option value=""></option>
                                    </select>
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label" for="Nationality">Nationality *</label>
                                    <select id="Nationality" name="Nationality" class="kt-select" required ng-options="item as item.Value for item in Nationality track by item.Key" ng-model="ProfileDetails.Nationality">
                                        <option value=""></option>
                                    </select>
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">National Identity No.</label>
                                    <input type="text" class="kt-input" placeholder="NationalID" ng-model="ProfileDetails.NationalID">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Passport No. *</label>
                                    <input type="text" class="kt-input" placeholder="Passport number" required ng-model="ProfileDetails.PassportNumber">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Passport Expiry *</label>
                                    <input type="text" class="kt-input" autocomplete="off" required ng-model="ProfileDetails.PassportExpiryString" datetime-picker />
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label" for="passportCountry">Passport Issued Country *</label>
                                    <select id="passportCountry" name="passportCountry" class="kt-select" required ng-options="item as item.Value for item in Country track by item.Key" ng-model="ProfileDetails.PassportIssueCountry">
                                        <option value=""></option>
                                    </select>
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Phone number</label>
                                    <input type="text" class="kt-input" placeholder="Phone number" ng-model="ProfileDetails.PhoneNumber">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Mobile number *</label>
                                    <input type="text" class="kt-input" placeholder="Mobile number" ng-model="ProfileDetails.MobileNumber">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Email *</label>
                                    <input type="email" class="kt-input" required disabled ng-model="ProfileDetails.EmailID">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Total Work Experience</label>
                                    <input type="number" class="kt-input" placeholder="e.g., 5" id="totalWorkExperience" ng-model="ProfileDetails.TotalWorkExperience" maxlength="2">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Reference Code</label>
                                    <input type="text" class="kt-input" placeholder="Reference Code" id="referenceCode" ng-model="ProfileDetails.ReferenceCode">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Education & Skill Set Card -->
                    <div class="kt-card kt-card-border mb-9">
                        <div class="kt-card-header">
                            <h3 class="kt-card-title">Education & Skill Set</h3>
                        </div>
                        <div class="kt-card-content">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                                <div class="kt-form-item">
                                    <label class="kt-form-label" for="education">Qualification</label>
                                    <select id="education" name="education" class="kt-select" required ng-options="item as item.Value for item in Qualifications track by item.Key" ng-model="ProfileDetails.Qualification">
                                        <option value=""></option>
                                    </select>
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label" for="skill">Skills</label>
                                    <select class="selectpicker" multiple data-live-search="true" id="skill" ng-model="ProfileDetails.Skill" ng-options="skill.Value for skill in AvailableJobSkills">
                                        <option value="" disabled>Select skill</option>
                                    </select>
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Selected Skills</label>
                                    <div class="flex flex-wrap gap-2 min-h-8.5 items-center">
                                        <div class="kt-badge kt-badge-secondary" ng-repeat="skill in ProfileDetails.Skill">{{skill.Value}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Social media detail Card -->
                    <div class="kt-card kt-card-border mb-9">
                        <div class="kt-card-header">
                            <h3 class="kt-card-title">Social media detail</h3>
                        </div>
                        <div class="kt-card-content">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                                <div class="kt-form-item">
                                    <label class="kt-form-label"><i class="fab fa-fw fa-facebook me-2 text-blue-600"></i>Facebook</label>
                                    <input type="text" class="kt-input" placeholder="https://facebook.com/..." ng-model="ProfileDetails.Facebook">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label"><i class="fab fa-fw fa-twitter me-2 text-blue-500"></i>Twitter</label>
                                    <input type="text" class="kt-input" placeholder="https://twitter.com/..." ng-model="ProfileDetails.Twitter">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label"><i class="fab fa-fw fa-linkedin-in me-2 text-blue-800"></i>Linkedin</label>
                                    <input type="text" class="kt-input" placeholder="https://linkedin.com/in/..." ng-model="ProfileDetails.LinkedIn">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label"><i class="fab fa-fw fa-instagram me-2 text-destructive"></i>Instagram</label>
                                    <input type="text" class="kt-input" placeholder="https://instagram.com/..." ng-model="ProfileDetails.Instagram">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Change Password Card -->
                    <div class="kt-card kt-card-border">
                        <div class="kt-card-header">
                            <h3 class="kt-card-title">Change Password</h3>
                        </div>
                        <div class="kt-card-content">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                                <div class="kt-form-item">
                                    <label class="kt-form-label">New password</label>
                                    <input type="password" class="kt-input" ng-model="ProfileDetails.Password">
                                </div>
                                <div class="kt-form-item">
                                    <label class="kt-form-label">Confirm Password</label>
                                    <input type="password" class="kt-input" ng-model="ProfileDetails.ConfirmPassword">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="kt-form-actions mt-5">
                        <input type="submit" id="submitBtn" class="hidden">
                        <label for="submitBtn" class="kt-btn kt-btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-floppy" viewBox="0 0 16 16">
                                <path d="M11 2H9v3h2z" />
                                <path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z" />
                            </svg>
                            <span>Save Changes</span>
                        </label>
                    </div>

                </form>
                <!--end::Form-->
            </div>
            <!--end::Card Body-->
        </div>
        <!--end::Main Card-->
    </div>
</div>

<!-- Bootstrap Select JS (requires jQuery and Bootstrap bundle) -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>