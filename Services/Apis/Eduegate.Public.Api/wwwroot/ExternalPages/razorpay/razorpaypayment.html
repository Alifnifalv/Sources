<!-- <button id="rzp-button1">Pay</button> -->
<!-- <meta http-equiv='refresh' content='0;' id = "rzp-button1"> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script type="text/javascript"> 

// const urlParams = new URLSearchParams(window.location.search);
        
//         const key = "rzp_test_hHEKIXoW3ePeXb";
//         const amount = urlParams.get('amount');
//         const order_id = urlParams.get('orderID');
//         // const orderRef = urlParams.get('orderRef');
//         // const customerEmail = urlParams.get('customerEmail');
//         // const customerPhone = urlParams.get('customerPhone');
// 	// const sessionID = urlParams.get('SessionID');
//         const handler = function (response){
//             alert(response.razorpay_payment_id);
//             alert(response.razorpay_order_id);
//             alert(response.razorpay_signature)
//     }

const urlParams = new URLSearchParams(window.location.search); 

        const orderID = urlParams.get('SessionID');
        const orderRef = urlParams.get('orderRef');
        const amount = urlParams.get('amount');
        const customerEmail = urlParams.get('customerEmail');
        const customerPhone = urlParams.get('customerPhone');
        const customerName = urlParams.get('customerName');
	    const sessionID = urlParams.get('SessionID');

var options = {
    
    "key": "rzp_test_7dLfgNDoJYc0v2", // Enter the Key ID generated from the Dashboard
    // "amount": (amount), // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
    "currency": "INR",
    "name": "Nuts and Chocolate",
    "image": "http://api.eduegate.com/Images/logo.png",
    "order_id": orderID, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
    // "redirect": true,
    // "callback_url": "http://api.eduegate.com/ExternalPages/razorpay/payment-success.html",
    "handler": function (response){
        // alert(response.razorpay_payment_id);
        // alert(response.razorpay_order_id);
        // alert(response.razorpay_signature)
        window.location.replace ("http://api.eduegate.com/ExternalPages/razorpay/payment-success.html?data=" + response.razorpay_payment_id );
        // setTimeout(function () {
        //         window.location = "http://api.eduegate.com/ExternalPages/razorpay/payment-success.html?data=" + response.razorpay_payment_id ;
        //     });
    },
    "prefill": {    
        "name": customerName,
        "email": customerEmail,
        "contact": customerPhone
    },
    "theme": {
        "color": "#693100"
    }
};
var rzp1 = new Razorpay(options);
rzp1.on('payment.failed', function (response){
        // alert(response.error.code);
        // alert(response.error.description);
        // alert(response.error.source);
        // alert(response.error.step);
        // alert(response.error.reason);
        // alert(response.error.metadata.order_id);
        // alert(response.error.metadata.payment_id);

    window.location.href = "http://api.eduegate.com/ExternalPages/razorpay/payment-failure.html?data=" + response.error.code ;

});
// document.getElementById('rzp-button1').onclick = function(e){
//     rzp1.open();
//     e.preventDefault();
// }
$(document).ready(function(e){
        rzp1.open();
    // e.preventDefault();
});
</script>