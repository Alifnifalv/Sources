<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!--<script type="text/javascript">
        var urlParams = new URLSearchParams(window.location.search);
        var MerchantCheckoutJS = urlParams.get('MerchantCheckoutJS');
    </script>-->
    <script src="https://test-cbq.mtf.gateway.mastercard.com/checkout/version/61/checkout.js"
            data-error="errorCallback"
            data-cancel="cancelCallback"
            data-complete="completeCallback">
    </script>

    <script type="text/javascript">

        const urlParams = new URLSearchParams(window.location.search);
        const orderID = urlParams.get('orderID');
        const orderRef = urlParams.get('orderRef');
        const amount = urlParams.get('amount');
        const currency = urlParams.get('currency');
        const description = urlParams.get('description');
        const sessionID = urlParams.get('SessionID');
        const merchantID = urlParams.get('merchantID');
        const merchantName = urlParams.get('merchantName');
        const logoURL = urlParams.get('logoURL');
        const cardURL = urlParams.get('cardURL');

        function errorCallback() {

            window.location = "http://stagingapi.pearlschool.org/ExternalPages/Mastercard/mastercardpayment-failure.html";
        }

        function cancelCallback() {
            window.location = "http://stagingapi.pearlschool.org/ExternalPages/Mastercard/mastercardpayment-cancel.html";
        }

        function completeCallback() {
            window.location = "http://stagingapi.pearlschool.org/ExternalPages/Mastercard/mastercardpayment-success.html";
        }

        Checkout.configure(
            {
                merchant: function () { return merchantID; },
                session: {
                    id: function () { return sessionID; },
                },
                order:
                {
                    amount: function () {
                        //Dynamic calculation of amount
                        return amount;
                    },
                    currency: function () { return currency; },
                    description: function () { return description; },
                    id: function () { return orderID; },//Dynamic order id for testing
                    reference: function () { return orderRef; }
                },

                interaction:
                {
                    merchant:
                    {
                        name: function () { return merchantName; },
                        logo: "https://parent.pearlschool.org/img/PaymentLogo.png"
                    },
                    operation: "PURCHASE",
                    displayControl: {
                        billingAddress: "HIDE",
                        paymentConfirmation: "HIDE",
                        shipping: "HIDE"
                    }
                }
            });
    </script>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .standalone {
            display: flex;
            height: 100%;
            width: 100%;
            justify-content: center;
            align-items: center;
        }

        .logo img {
            max-width: 100px;
        }
    </style>

</head>
<body>
    <div class="standalone">
        <div class="logo">
            <img src="https://parent.pearlschool.org/img/PODARLOGO-01.png" />
        </div>
    </div>
    <script type="text/javascript">
        Checkout.showPaymentPage();
    </script>
</body>
</html>