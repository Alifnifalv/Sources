@{
    ViewBag.Title = "Mailbox";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Design_v02/css/pages/inbox.min.css" rel="stylesheet" type="text/css" />
<div class="bg-light d-flex flex-column" data-aos="fade-up" style="flex:1;" ng-controller="MailBoxController">
    <section class="home-section-wrap">
        <div class="container">
            <div class="row row-eq-height">
                <div class="p-md-sm-0  fontawesome-demo">
                    <div class="container-custom container-xxl d-flex flex-column-fluid  p-md-sm-0">
                        <div class="content d-flex flex-row flex-row-fluid" id="kt_content">
                            <div class="d-flex flex-column flex-row-fluid">
                                <div class="d-flex flex-stack flex-wrap gap-2 mt-n1 mb-6" id="kt_toolbar">
                                    <div class="page-title d-flex flex-column align-items-start me-3 py-2 py-lg-0 gap-2">
                                        <h1 class="d-flex text-dark fw-bold m-0 fs-3" ng-click="loadMessages()">Mail</h1>
                                        <ul class="breadcrumb breadcrumb-dot fw-semibold text-gray-600 fs-7">
                                            <li class="breadcrumb-item text-gray-600">
                                                <a class="text-gray-600 text-hover-primary">Home</a>
                                            </li>
                                            <li class="breadcrumb-item text-gray-500">inbox</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="flex-column-fluid">
                                    <div class="row gy-5 g-xl-10">
                                        <div class="d-lg-flex flex-column flex-lg-row-auto w-lg-325px h-100">
                                            <div class="card card-flush h-xl-100">
                                                <div class="card-header pt-7">
                                                    <div class="card-toolbar">
                                                        <button id="kt_drawer_example_basic_button" class="btn  btn-primary" onclick="ComposeMailToggle()">Compose</button>

                                                    </div>
                                                </div>
                                                <div class="card-body">
                                                    <div class="menu
                                                                menu-sub-indention
                                                                menu-rounded
                                                                menu-column
                                                                menu-active-bg
                                                                menu-title-gray-600
                                                                menu-icon-gray-400
                                                                menu-state-primary
                                                                menu-arrow-gray-500
                                                                fw-semibold
                                                                fs-6
                                                                py-4
                                                                py-lg-6
                                                                ms-n7">
                                                        <div class="hover-scroll-y px-1 px-lg-2">


                                                            <div class="menu-item">
                                                                <div class="menu-content ">
                                                                    <span class="menu-section fs-5 fw-bolder ps-1 py-1">Home</span>
                                                                </div>
                                                            </div>
                                                            <div class="menu-item">
                                                                <a class="menu-link active position-relative" ng-class="IsInbox == true ? 'active': ''" ng-click="toGetMails('Inbox')">
                                                                    <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
                                                                    <span class="position-absolute top-0 end-0 translate-middle badge badge-circle badge-primary" ng-bind="AlertCount"></span>
                                                                    <span class="menu-title">Inbox</span>
                                                                </a>
                                                            </div>
                                                            <div class="menu-item">
                                                                <a class="menu-link" ng-class="IsSend == true ? 'active': ''" ng-click="toGetSendMails('Sent')">
                                                                    <span class="menu-bullet"><span class="bullet bullet-dot"></span></span>
                                                                    <span class="menu-title">Sent</span>
                                                                </a>
                                                            </div>
                                                            <div class="menu-item">
                                                                <a class="menu-link" ng-class="IsAllMail == true ? 'active': ''" ng-click="toGetAllMails('AllMails')">
                                                                    <span class="menu-bullet">
                                                                        <span class="bullet bullet-dot"></span>
                                                                    </span><span class="menu-title">All Mail</span>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="card card-flush h-xl-100">
                                                <div class="card-header pt-7">
                                                    <h3 class="card-title align-items-start flex-column">
                                                        <span class="card-label fw-bold text-dark">{{tab}}</span>
                                                        <span class="text-gray-400 mt-1 fw-semibold fs-6">Total <span ng-bind="AlertCount"></span> new Mails</span>
                                                    </h3>
                                                    <div class="card-toolbar">
                                                        <div class="d-flex flex-stack flex-wrap gap-4">


                                                            <a class="btn btn-light btn-sm" ng-click="loadMessages()">
                                                                <i class=" mini tooltips fa fa-refresh fa-lg" title="refresh"></i>
                                                                refresh
                                                            </a>
                                                            <a class="btn btn-light btn-sm" ng-if="IsInbox == true" ng-click="MarkAsRead(0)">
                                                                <i class=" mini tooltips fa fa-eraser" title="mark all read"></i>
                                                                mark all read
                                                            </a>
                                                            <!--end::Search-->
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-body">

                                                    <div id="spinner-container" style="display: flex; justify-content: center; align-items: center;">
                                                        <div class="spinner-border" role="status">
                                                            <span class="sr-only">Loading...</span>
                                                        </div>
                                                    </div>

                                                    <div id="kt_table_widget_5_table_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
                                                        <div class="table-responsive table-responsive-custom">

                                                            <div class="inbox-body no-pad table-responsive">
                                                                <table class="table table-inbox table-hover
                                                                           table align-middle table-row-dashed fs-6 gy-3 dataTable no-footer
                                                                           ">
                                                                    <tbody class="fw-bold text-gray-600">
                                                                        <tr class="unread" ng-repeat="inboxMails in unreadMailData" ng-if="IsInbox == true">
                                                                            <td class="inbox-small-cells">
                                                                                <div class="todo-check pull-left">
                                                                                    @*<input type="checkbox" value="None"
                                                                                    id="todo-check1">
                                                                                    <label for="todo-check1"></label>*@
                                                                                    <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                                                                                </div>
                                                                            </td>
                                                                            <td colspan="7" ng-if="unreadMailData.length==0"><p class="text-sm-center">-no data-</p></td>
                                                                            <td colspan="7" class="view-message text-dark text-hover-primary dont-show" ng-bind="inboxMails.FromEmployeeName"></td>
                                                                            <td class="view-message ">
                                                                                <a href="#" ng-bind-html="inboxMails.Message">
                                                                                </a>
                                                                            </td>
                                                                            <td class="view-message  text-right" ng-bind="inboxMails.NotificationDateString"></td>
                                                                            <td class="from">
                                                                                <i class="fa fa-envelope-open-o pull-right" aria-hidden="true" ng-click="MarkAsRead(inboxMails.NotificationAlertIID)" title="Mark as read"></i>
                                                                            </td>
                                                                        </tr>
                                                                        <tr class="unread" ng-repeat="mail in sendMails" ng-if="IsSend == true">
                                                                            <td class="inbox-small-cells">
                                                                                <div class="todo-check pull-left">
                                                                                    @*<input type="checkbox" value="None"
                                                                                    id="todo-check1">
                                                                                    <label for="todo-check1"></label>*@
                                                                                    <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                                                                                </div>
                                                                            </td>
                                                                            <td class="inbox-small-cells">
                                                                                @*<i class="fa fa-star inbox-started"></i>*@
                                                                            </td>
                                                                            @*<td>
                                                                            <a href="#" class="avatar">

                                                                            <img src="~/Design_v02/img/std/std8.jpg"
                                                                            alt="">
                                                                            </a>
                                                                            </td>*@
                                                                            <td class="view-message  dont-show"><span>To: </span><span ng-bind="mail.SendTo"></span></td>
                                                                            <td class="view-message ">
                                                                                <a href="#" ng-bind="mail.mailSubject" title={{mail.mailBody}}>
                                                                                </a>
                                                                            </td>
                                                                            <td class="view-message  inbox-small-cells">
                                                                                @*<i class="fa fa-paperclip"></i>*@
                                                                            </td>
                                                                            <td class="view-message  text-right"> <span>{{mail.onDate | filterdate | date:'dd/MM/yyyy'}}</span> </td>
                                                                            @*ng-bind="mail.onDate|DATE"*@
                                                                        </tr>
                                                                        <tr class="unread" ng-repeat="mails in allMails" ng-if="IsAllMail == true">
                                                                            <td class="inbox-small-cells">
                                                                                <div class="todo-check pull-left">
                                                                                    @*<input type="checkbox" value="None"
                                                                                    id="todo-check1">
                                                                                    <label for="todo-check1"></label>*@
                                                                                    <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                                                                                </div>
                                                                            </td>
                                                                            <td colspan="7" ng-if="mails.length==0"><p class="text-sm-center">-no data-</p></td>
                                                                            <td colspan="7" class="view-message text-dark text-hover-primary dont-show" ng-bind="mails.FromLogin"></td>
                                                                            <td class="view-message ">
                                                                                <a href="#" ng-bind="mails.Message">
                                                                                </a>
                                                                            </td>
                                                                            <td class="view-message  text-right" ng-bind="mails.NotificationDateString"></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div><div class="row"><div class="col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"></div><div class="col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end"></div></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row gy-5 g-xl-10">
                        <div class="col-xl-4 mb-5 mb-xl-10">
                        </div>

                    </div>
                </div>

            </div><!--pageContent-->
        </div><!--pageContainer-->
    </section>
</div>


<script type="text/javascript">
    function ComposeMailToggle() {
        $("#mailComposeContainer").show();
    }
</script>

<style>
    .text-gray-600 {
        color: var(--kt-text-gray-600) !important;
    }

    .fw-bold {
        font-weight: 600 !important;
    }

    .text-active-primary.active .svg-icon {
        color: var(--kt-info-light) !important;
    }
</style>

